webpackJsonp([1],{"05Kw":function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=i("MVMM");function s(t,e,i){return t<e?t=e:t>i&&(t=i),t}function o(t){return t=window.parseInt(t),window.isNaN(t)&&(t=0),t}function n(t,e){var i=e.getBoundingClientRect(),l=i.top,s=i.left,o=i.bottom;if(document.documentElement.clientHeight-o<t.listWrap.ww&&l>=t.listWrap.ww)return t.isTop=!0,t.listLeft=s+"px",void(t.listTop=l-t.listWrap.wh-10+"px");t.listLeft=s+"px",t.listTop=o+"px",t.isTop=!1}var a={props:{readOnly:{type:Boolean,default:!1},idField:{type:String,default:"id"},textField:{type:String,default:"text"},placeholder:{type:String,default:"请选择"},multiple:{type:Boolean,default:!1},textWidth:{type:String,default:"240px"},textHeight:{type:String,default:"40px"},panelWidth:{type:String,default:"240px"},panelHeight:{type:String,default:"260px"},panelMaxHeight:{type:String,default:"240px"},itemHeight:{type:String,default:"40px"},wrap:{type:String,default:"wb"},data:{type:Array,default:function(){return[]}}},data:function(){return{inpTxt:"",inpFlg:!1,isMove:!1,isFocus:!0,isTop:!1,selections:[],listWrap:{},listTop:0,listLeft:0}},mounted:function(){this.listWrap.ww=this.$refs.listWrapper.offsetWidth,this.listWrap.wh=this.$refs.listWrapper.offsetHeight,this.listWrap.cw=this.$refs.listCon.offsetWidth,this.listWrap.ch=this.$refs.listCon.offsetHeight,this.isFocus=!1,this.$nextTick(function(){document.querySelector("body").appendChild(this.$el.childNodes[2])});var t=this;window.addEventListener("scroll",function(){return n(t,t.$el.childNodes[0])})},computed:{filteredData:function(){var t=this;return this.data.filter(function(e){return e.filtList=e.list.filter(function(e){return void 0!==e[t.idField]&&(""===t.inpTxt||-1!==e[t.textField].indexOf(self.inpTxt)||t.selections.length)}),e.filtList.length})},multiHeight:function(){return.7*o(this.inputStyleObj.height)+"px"},inputStyleObj:function(){return{width:this.textWidth,height:this.textHeight}},listStyleObj:function(){return{width:this.panelWidth,height:this.panelHeight,maxHeight:this.panelMaxHeight,top:this.listTop,left:this.listLeft}},itemStyleObj:function(){return{lineHeight:o(this.itemHeight)-4+"px",height:this.itemHeight}},search:function(){var t=this.inpTxt;return this.multiple?t="":""===t?this.selections=[]:!this.inpFlg&&this.selections.length&&(t=this.selections[0][this.textField]),this.inpTxt=t,this.inpFlg=!1,t},placeholder_:function(){return this.multiple&&this.selections.length?"":this.placeholder},hScrWidth:function(){var t=this,e=this.$refs.listWrapper,i=void 0;return void 0!==this.listStyleObj.height&&e&&1!==this.isFocus&&this.filteredData&&setTimeout(function(){e.offsetWidth&&(t.listWrap.ww=e.offsetWidth,t.listWrap.cw=t.$refs.listCon.offsetWidth),t.listWrap.ww<t.listWrap.cw&&(i=t.listWrap.ww/t.listWrap.cw*100+"%"),t.$refs.hScorllbar.style.width=i}),i},vScrHeight:function(){var t=this,e=this.$refs.listWrapper,i=void 0;return void 0!==this.listStyleObj.height&&e&&1!==this.isFocus&&this.filteredData&&setTimeout(function(){e.offsetHeight&&(t.listWrap.wh=e.offsetHeight,t.listWrap.ch=t.$refs.listCon.offsetHeight),t.listWrap.wh<t.listWrap.ch&&(i=t.listWrap.wh/t.listWrap.ch*100+"%"),t.$refs.vScorllbar.style.height=i}),i}},methods:{formatValue:function(t){this.inpFlg=!0,this.inpTxt=t},cliInput:function(){if(!this.readOnly){this.isFocus=!this.isFocus;n(this,this.$el.childNodes[0])}},hDrag:function(t){var e=this.$refs,i=this.listWrap.ww-e.hScorllbar.offsetWidth,l=this.listWrap.ww-this.listWrap.cw,n=l/i;this.isMove=!0;var a=t.clientX-e.hScorllbar.offsetLeft,r=o(e.listCon.style.left),p=o(e.hScorllbar.style.left);document.onmousemove=function(t){var o=t.clientX-a,d=p+o,c=r+o*n;d=s(d,0,i),c=s(c,l,0),e.hScorllbar.style.left=d+"px",e.listCon.style.left=c+"px"},document.onmouseup=function(t){this.isMove=!1,document.onmousemove=null,document.onmouseup=null}},vDrag:function(t){var e=this.$refs,i=this.listWrap.wh-e.vScorllbar.offsetHeight-5,l=this.listWrap.wh-this.listWrap.ch,n=l/i;this.isMove=!0;var a=t.clientY-e.vScorllbar.offsetTop,r=o(e.listCon.style.top),p=o(e.vScorllbar.style.top);document.onmousemove=function(t){var o=t.clientY-a,d=p+o,c=r+o*n;d=s(d,0,i),c=s(c,l,0),e.vScorllbar.style.top=d+"px",e.listCon.style.top=c+"px"},document.onmouseup=function(t){this.isMove=!1,document.onmousemove=null,document.onmouseup=null}},scroll:function(t){var e=this.$refs,i=e.listWrapper.offsetHeight-e.vScorllbar.offsetHeight-5,l=this.listWrap.wh-this.listWrap.ch;if(!(l>0)){var n=l/i,a=o(e.vScorllbar.style.top),r=o(e.listCon.style.top);t.deltaY>0?(a+=5,r+=5*n):(a-=5,r-=5*n),a=s(a,0,i),r=s(r,l,0),e.vScorllbar.style.top=a+"px",e.listCon.style.top=r+"px"}},selectRow:function(t,e){t[this.idField],t[this.textField];if(t.index=e,this.multiple)if(-1!==this.selections.indexOf(t))this.unSelectRow(t,e);else{if(!1===this.$emit("beforeSelectRow",t,e))return;this.selections.push(t),this.$emit("onSelectRow",t,e)}else{if(!1===this.$emit("beforeSelectRow",t,e))return;this.inpTxt="s",this.selections=[t],this.isFocus=!1,this.$emit("onSelectRow",t,e)}},unSelectRow:function(t,e){!1!==this.$emit("beforeUnselectRow",t,e)&&(this.selections.splice(this.selections.indexOf(t),1),this.$emit("onUnselectRow",t,e))}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dropdown-wrapper",style:t.inputStyleObj},[i("div",{ref:"input",staticClass:"dropdown-input",on:{click:t.cliInput}},[t.multiple?i("div",{staticClass:"dropdown-tags"},t._l(t.selections,function(e){return i("span",{staticClass:"dropdown-tag",style:{lineHeight:t.multiHeight}},[i("span",[t._v(t._s(e[t.textField]))]),t._v(" "),i("span",{staticClass:"dropdown-tag-cls",on:{click:function(i){i.stopPropagation(),t.unSelectRow(e,e.index)}}},[t._v("×")])])})):t._e(),t._v(" "),i("input",{staticClass:"dropdown-input-inner",class:{"is-focus":t.isFocus,"is-readonly":t.readOnly},attrs:{type:"text",placeholder:t.placeholder_,readonly:t.readOnly},domProps:{value:t.search},on:{input:function(e){t.formatValue(e.target.value)}}}),t._v(" "),i("div",{staticClass:"dropdown-icon",class:{"is-reverse":t.isFocus},style:{lineHeight:t.inputStyleObj.height}},[t._v(">")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isFocus,expression:"isFocus"}],staticClass:"dropdown-down",style:t.listStyleObj},[i("div",{ref:"listWrapper",staticClass:"dropdown-list-wrapper",class:{"is-move":t.isMove},style:{maxHeight:t.panelMaxHeight},on:{mousewheel:t.scroll}},[i("ul",{ref:"listCon",staticClass:"dropdown-list"},t._l(t.filteredData,function(e,l){return i("ul",{staticClass:"dropdown-group"},[void 0!==e.label?i("li",{staticClass:"dropdown-label",style:t.itemStyleObj},[t._v(t._s(e.label))]):t._e(),t._v(" "),t._l(e.filtList,function(e,l){return i("li",{key:e[t.idField],staticClass:"dropdown-item",class:[{"is-selected":-1!==t.selections.indexOf(e)},t.wrap],style:t.itemStyleObj,on:{click:function(i){t.selectRow(e,l)}}},[t._v(t._s(e[t.textField]))])})],2)})),t._v(" "),i("div",{staticClass:"dropdown-scrollbar is-horizontal"},[i("div",{ref:"hScorllbar",staticClass:"dropdown-thumb",style:{width:t.hScrWidth},on:{mousedown:t.hDrag}})]),t._v(" "),i("div",{staticClass:"dropdown-scrollbar is-vertical"},[i("div",{ref:"vScorllbar",staticClass:"dropdown-thumb",style:{height:t.vScrHeight},on:{mousedown:t.vDrag}})])]),t._v(" "),i("div",{staticClass:"dropdown-arrow",class:{"is-top":t.isTop}})])])},staticRenderFns:[]};var p=i("Z0/y")(a,r,!1,function(t){i("pBIf")},"data-v-c7b10734",null).exports,d={name:"Page",components:{Dropdown:p},data:function(){return{readonly:!0,multiple:!1,stlObj:{textWidth:"240px",textHeight:"70px",panelWidth:"280px",panelHeight:"auto",panelMaxHeight:"240px",itemHeight:"30px",placeholder:"placeholder"},listOpt:{idField:"id",textField:"text",data:[]},nObj:{value:0,text:"txt-0",label:"title"},bottom:"80px",scroll:!0}},methods:{add:function(t,e){var i={};i[this.listOpt.idField]=this.nObj.value,i[this.listOpt.textField]=this.nObj.text;var l=this.listOpt.data.length;e||!e&&!l?this.listOpt.data.push({label:this.nObj.label,list:[i]}):this.listOpt.data[l-1].list.push(i),this.nObj.value++,this.nObj.text=this.nObj.text.substr(0,3)+this.nObj.value}},mounted:function(){}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"page"}},[i("div",{staticClass:"dropdown-wrap"},[i("div",{staticClass:"dropdown"},[i("Dropdown",{attrs:{readOnly:t.readonly}})],1),t._v(" "),i("label",{attrs:{for:"isre"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.readonly,expression:"readonly"}],attrs:{type:"checkbox",id:"isre"},domProps:{checked:Array.isArray(t.readonly)?t._i(t.readonly,null)>-1:t.readonly},on:{change:function(e){var i=t.readonly,l=e.target,s=!!l.checked;if(Array.isArray(i)){var o=t._i(i,null);l.checked?o<0&&(t.readonly=i.concat([null])):o>-1&&(t.readonly=i.slice(0,o).concat(i.slice(o+1)))}else t.readonly=s}}}),t._v("只读\n    ")])]),t._v(" "),i("div",{staticClass:"dropdown-wrap"},[i("div",{staticClass:"dropdown"},[i("Dropdown",{attrs:{multiple:t.multiple}})],1),t._v(" "),i("label",{attrs:{for:"ismul"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.multiple,expression:"multiple"}],attrs:{type:"checkbox",id:"ismul"},domProps:{checked:Array.isArray(t.multiple)?t._i(t.multiple,null)>-1:t.multiple},on:{change:function(e){var i=t.multiple,l=e.target,s=!!l.checked;if(Array.isArray(i)){var o=t._i(i,null);l.checked?o<0&&(t.multiple=i.concat([null])):o>-1&&(t.multiple=i.slice(0,o).concat(i.slice(o+1)))}else t.multiple=s}}}),t._v("多选\n    ")])]),t._v(" "),i("div",{staticClass:"dropdown-wrap"},[i("div",{staticClass:"dropdown"},[i("Dropdown",t._b({},"Dropdown",t.stlObj,!1))],1),t._v(" "),i("div",[i("label",{attrs:{for:""}},[t._v("宽度 ："),i("input",{directives:[{name:"model",rawName:"v-model",value:t.stlObj.textWidth,expression:"stlObj.textWidth"}],attrs:{type:"text"},domProps:{value:t.stlObj.textWidth},on:{input:function(e){e.target.composing||t.$set(t.stlObj,"textWidth",e.target.value)}}})]),t._v(" "),i("label",{attrs:{for:""}},[t._v("高度 ："),i("input",{directives:[{name:"model",rawName:"v-model",value:t.stlObj.textHeight,expression:"stlObj.textHeight"}],attrs:{type:"text"},domProps:{value:t.stlObj.textHeight},on:{input:function(e){e.target.composing||t.$set(t.stlObj,"textHeight",e.target.value)}}})]),t._v(" "),i("label",{attrs:{for:""}},[t._v("面板宽度 ："),i("input",{directives:[{name:"model",rawName:"v-model",value:t.stlObj.panelWidth,expression:"stlObj.panelWidth"}],attrs:{type:"text"},domProps:{value:t.stlObj.panelWidth},on:{input:function(e){e.target.composing||t.$set(t.stlObj,"panelWidth",e.target.value)}}})]),t._v(" "),i("label",{attrs:{for:""}},[t._v("面板高度 ："),i("input",{directives:[{name:"model",rawName:"v-model",value:t.stlObj.panelHeight,expression:"stlObj.panelHeight"}],attrs:{type:"text"},domProps:{value:t.stlObj.panelHeight},on:{input:function(e){e.target.composing||t.$set(t.stlObj,"panelHeight",e.target.value)}}})])]),t._v(" "),i("div",[i("label",{attrs:{for:""}},[t._v("面板最大高度 ："),i("input",{directives:[{name:"model",rawName:"v-model",value:t.stlObj.panelMaxHeight,expression:"stlObj.panelMaxHeight"}],attrs:{type:"text"},domProps:{value:t.stlObj.panelMaxHeight},on:{input:function(e){e.target.composing||t.$set(t.stlObj,"panelMaxHeight",e.target.value)}}})]),t._v(" "),i("label",{attrs:{for:""}},[t._v("选项行高度 ："),i("input",{directives:[{name:"model",rawName:"v-model",value:t.stlObj.itemHeight,expression:"stlObj.itemHeight"}],attrs:{type:"text"},domProps:{value:t.stlObj.itemHeight},on:{input:function(e){e.target.composing||t.$set(t.stlObj,"itemHeight",e.target.value)}}})]),t._v(" "),i("label",{attrs:{for:""}},[t._v("填充 ："),i("input",{directives:[{name:"model",rawName:"v-model",value:t.stlObj.placeholder,expression:"stlObj.placeholder"}],attrs:{type:"text"},domProps:{value:t.stlObj.placeholder},on:{input:function(e){e.target.composing||t.$set(t.stlObj,"placeholder",e.target.value)}}})])])]),t._v(" "),i("div",{staticClass:"dropdown-wrap"},[i("div",{staticClass:"dropdown"},[i("Dropdown",t._b({},"Dropdown",t.listOpt,!1))],1),t._v(" "),i("div",[i("label",{attrs:{for:""}},[t._v("value字段名 ："),i("input",{directives:[{name:"model",rawName:"v-model",value:t.listOpt.idField,expression:"listOpt.idField"}],attrs:{type:"text"},domProps:{value:t.listOpt.idField},on:{input:function(e){e.target.composing||t.$set(t.listOpt,"idField",e.target.value)}}})]),t._v(" "),i("label",{attrs:{for:""}},[t._v("value ："),i("input",{directives:[{name:"model",rawName:"v-model",value:t.nObj.value,expression:"nObj.value"}],attrs:{type:"text"},domProps:{value:t.nObj.value},on:{input:function(e){e.target.composing||t.$set(t.nObj,"value",e.target.value)}}})]),t._v(" "),i("label",{attrs:{for:""}},[t._v("title ："),i("input",{directives:[{name:"model",rawName:"v-model",value:t.nObj.label,expression:"nObj.label"}],attrs:{type:"text"},domProps:{value:t.nObj.label},on:{input:function(e){e.target.composing||t.$set(t.nObj,"label",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"label"},[i("label",{attrs:{for:""}},[t._v("显示文本字段名 ："),i("input",{directives:[{name:"model",rawName:"v-model",value:t.listOpt.textField,expression:"listOpt.textField"}],attrs:{type:"text"},domProps:{value:t.listOpt.textField},on:{input:function(e){e.target.composing||t.$set(t.listOpt,"textField",e.target.value)}}})]),t._v(" "),i("label",{attrs:{for:""}},[t._v("显示文本 ："),i("input",{directives:[{name:"model",rawName:"v-model",value:t.nObj.text,expression:"nObj.text"}],attrs:{type:"text"},domProps:{value:t.nObj.text},on:{input:function(e){e.target.composing||t.$set(t.nObj,"text",e.target.value)}}})]),t._v(" "),i("label",{attrs:{for:""}},[i("a",{attrs:{href:"javascript:;"},on:{click:t.add}},[t._v("同组添加")])]),t._v(" "),i("label",{attrs:{for:""}},[i("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.add(1,1)}}},[t._v("异组添加")])])])]),t._v(" "),i("div",{style:{height:t.scroll?"1500px":0}}),t._v(" "),i("div",{staticClass:"dropdown-wrap bottom",style:{bottom:t.bottom}},[i("div",{staticClass:"dropdown"},[i("Dropdown")],1),t._v(" "),i("div",[i("label",{attrs:{for:""}},[t._v("\n        居底部高度 ："),i("input",{directives:[{name:"model",rawName:"v-model",value:t.bottom,expression:"bottom"}],attrs:{type:"text"},domProps:{value:t.bottom},on:{input:function(e){e.target.composing||(t.bottom=e.target.value)}}})]),t._v(" "),i("label",{attrs:{for:"scroll"}},[t._v("\n        滚动条 ："),i("input",{directives:[{name:"model",rawName:"v-model",value:t.scroll,expression:"scroll"}],attrs:{type:"checkbox",id:"scroll"},domProps:{checked:Array.isArray(t.scroll)?t._i(t.scroll,null)>-1:t.scroll},on:{change:function(e){var i=t.scroll,l=e.target,s=!!l.checked;if(Array.isArray(i)){var o=t._i(i,null);l.checked?o<0&&(t.scroll=i.concat([null])):o>-1&&(t.scroll=i.slice(0,o).concat(i.slice(o+1)))}else t.scroll=s}}})])]),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"label"},[this._v("\n      注：根据选项长度调节自制滚动条位置，以及绑定拖动，滚动事件；"),e("br"),this._v("\n      根据输入框位置，判断菜单显示位置并进行位置跟随\n    ")])}]};var u={name:"App",components:{Page:i("Z0/y")(d,c,!1,function(t){i("OKjc")},null,null).exports}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Page")],1)},staticRenderFns:[]};var v=i("Z0/y")(u,h,!1,function(t){i("05Kw")},null,null).exports,f=i("hRKE"),m=i.n(f),g=l.a.extend(p),b=function(){for(var t=arguments.length,e=Array(t>2?t-2:0),i=2;i<t;i++)e[i-2]=arguments[i];var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=new g;"object"!==(void 0===s?"undefined":m()(s))?o[s].apply(o,e):function(t,e){for(var i in e)t.hasOwnProperty(i)&&(t[i]=e[[i]])}(o.$data,s),o.$mount(),document.querySelector(l).appendChild(o.$el)};l.a.use(function(t){t.prototype.$dropdown=b}),l.a.config.productionTip=!1,new l.a({el:"#app",components:{App:v},template:"<App/>"})},OKjc:function(t,e){},pBIf:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.fdcfff5d821ad82d3fd7.js.map